{
    "contents" : "################################################################################\n#' purify BC PSP data \n#' \n#' \n#' @param treeDataRaw  data table, which is the raw tree data from DAT file, recordType == 2\n#'                  treeData can be obtained using obtainTreeDataAB function\n#'\n#' \n#' @param headDataRaw data.table, which is PSPDATA2015B, provided by AB\n#'        \n#'\n#' @return  two data tables, the first one head data, which contains the location and SA info.\n#'                           the second one is purified tree data, which contains inividual tree infor.\n#'                           for the tree data, all trees are alive.\n#'                      \n#'\n#' @note no note\n#'\n#' @seealso no\n#'\n#' @include \n#' @export\n#' @docType methods\n#' @rdname dataPurification_BC\n#'\n#' @author Yong Luo\n#'\n#' @examples\n#' \\dontrun{\n#' \n#' }\nsetGeneric(\"dataPurification_BC\", function(treeDataRaw, headDataRaw) {\n  standardGeneric(\"dataPurification_BC\")\n})\n#' @export\n#' @rdname dataPurification_BC\nsetMethod(\n  \"dataPurification_BC\",\n  signature = c(treeDataRaw = \"data.table\", \n                headDataRaw = \"data.table\"),\n  definition = function(treeDataRaw, headDataRaw) {\n    # purifying headData\n    # like AB data, the BC PSP have two level heirachical design (SAMP_ID and plot)\n    \n    # get the plots with SA\n    headDataRaw <- headDataRaw[tot_stand_age != -99,][\n      ,':='(utmtimes = length(unique(utm_zone)),\n            eastingtimes = length(unique(utm_easting)),\n            northingtimes = length(unique(utm_northing)),\n            SAtimes = length(unique(tot_stand_age)),\n            plotsizetimes = length(unique(area_pm))),\n      by = SAMP_ID]\n    # unique(headDataRaw$utmtimes)#1\n    # unique(headDataRaw$eastingtimes)#1\n    # unique(headDataRaw$northingtimes)# 1\n    # unique(headDataRaw$SAtimes)\n    # unique(headDataRaw$plotsizetimes)#1\n    headDataRaw[, SA:=as.integer(mean(tot_stand_age)),\n                by = SAMP_ID]\n    \n    # get the plots with locations\n    headData <- headDataRaw[!is.na(utm_zone) & !is.na(utm_easting) & !is.na(utm_northing),]\n    # get plots with plot size\n    headData <- headData[!is.na(area_pm),][,.(SAMP_ID, )]\n    \n    \n    \n    \n\n  })\n",
    "created" : 1461216346997.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "52981469",
    "id" : "71E6F83C",
    "lastKnownWriteTime" : 1461224238,
    "path" : "~/GitHub/landwebNRV/landwebNRV/R/dataPurification_BCMature.R",
    "project_path" : "R/dataPurification_BCMature.R",
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "type" : "r_source"
}