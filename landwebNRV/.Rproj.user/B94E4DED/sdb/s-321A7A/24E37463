{
    "contents" : "################################################################################\n#' Standardize species name from different forest inventory data, this function to make all\n#' the species compatible to biomassCalculation function\n#' \n#' \n#' @param speciesTable  data table. It must at least have one column species\n#'\n#' \n#' @param forestInventorySource,  Character string. Give the forest inventory data source             \n#'        Currently support MBPSP, MBTSP, ABPSP, BCPSP, SKPSP, SKTSP and NFIPSP           \n#'        \n#'\n#' @return  a data tables, the first one contains successfully standardized species.\n#'          the newSpeciesName is the standardized name, unknown means the species in \n#'          the original species table can not be found according to manual\n#'                      \n#'\n#' @note no note\n#'\n#' @seealso no\n#'\n#' @include \n#' @export\n#' @docType methods\n#' @rdname standardizeSpeciesName\n#'\n#' @author Yong Luo\n#'\n#' @examples\n#' \\dontrun{\n#' \n#' }\nsetGeneric(\"standardizeSpeciesName\", function(speciesTable, forestInventorySource) {\n  standardGeneric(\"standardizeSpeciesName\")\n})\n#' @export\n#' @rdname standardizeSpeciesName\nsetMethod(\n  \"standardizeSpeciesName\",\n  signature = c(speciesTable = \"data.table\", \n                forestInventorySource = \"character\"),\n  definition = function(speciesTable, forestInventorySource) {\n    if(forestInventorySource == \"MBPSP\" | forestInventorySource == \"MBTSP\"){\n      speciesTable[Species == \"WP\", newSpeciesName := \"white pine\"]\n      speciesTable[Species == \"RP\", newSpeciesName := \"red pine\"]\n      speciesTable[Species == \"JP\", newSpeciesName := \"jack pine\"]\n      speciesTable[Species == \"SP\", newSpeciesName := \"scots pine\"]\n      speciesTable[Species == \"BS\", newSpeciesName := \"black spruce\"]\n      speciesTable[Species == \"WS\", newSpeciesName := \"white spruce\"]\n      speciesTable[Species == \"BF\", newSpeciesName := \"balsam fir\"]\n      speciesTable[Species == \"TL\", newSpeciesName := \"tamarack larch\"]\n      speciesTable[Species == \"EC\", newSpeciesName := \"eastern redcedar\"]\n      # assume cedar in original document is eastern redcedar\n      speciesTable[Species == \"TA\", newSpeciesName := \"trembling aspen\"]\n      speciesTable[Species == \"LA\", newSpeciesName := \"largetooth aspen\"]\n      speciesTable[Species == \"BA\", newSpeciesName := \"balsam poplar\"]\n      speciesTable[Species == \"CO\", newSpeciesName := \"eastern cottonwood\"]\n      speciesTable[Species == \"W\", newSpeciesName := \"willow\"]\n      speciesTable[Species == \"WB\", newSpeciesName := \"white birch\"]\n      speciesTable[Species == \"B\", newSpeciesName := \"basswood\"]\n      speciesTable[Species == \"HB\", newSpeciesName := \"hackberry\"]\n      speciesTable[Species == \"MM\", newSpeciesName := \"manitoba maple\"]\n      speciesTable[Species == \"AS\", newSpeciesName := \"back ash\"]\n      # assume ash in original document is black ash\n      speciesTable[Species == \"E\", newSpeciesName := \"white elm\"]\n      speciesTable[Species == \"HH\", newSpeciesName := \"hop-hornbeam\"]\n      speciesTable[Species == \"BO\", newSpeciesName := \"white oak\"]\n      # assume bur oak in original document is white oak\n    } else if (forestInventorySource == \"BCPSP\"){\n      speciesTable[Species == \"SB\", newSpeciesName := \"black spruce\"]\n      speciesTable[Species == \"LT\", newSpeciesName := \"tamarack larch\"]\n      speciesTable[Species == \"SW\", newSpeciesName := \"white spruce\"]\n      speciesTable[Species == \"EP\", newSpeciesName := \"white birch\"]\n      speciesTable[Species == \"PLI\", newSpeciesName := \"lodgepole pine\"]\n      speciesTable[Species == \"ACB\", newSpeciesName := \"balsam poplar\"]\n      speciesTable[Species == \"S\", newSpeciesName := \"black spruce\"]\n      # S for spruce in original doc. assume S is black spruce\n      speciesTable[Species == \"PL\", newSpeciesName := \"lodgepole pine\"]\n      speciesTable[Species == \"ACT\", newSpeciesName := \"black cottonwood\"]\n      speciesTable[Species == \"AT\", newSpeciesName := \"trembling aspen\"]\n      speciesTable[Species == \"E\", newSpeciesName := \"white birch\"]\n      # E for birch in original doc. assume S is white birch\n      # speciesTable[Species == \"XC\", newSpeciesName := \"unknow conifer\"]\n      speciesTable[Species == \"BL\", newSpeciesName := \"alpine fir\"]\n      speciesTable[Species == \"EA\", newSpeciesName := \"white birch\"]\n      # EA is alaka paper birch, assume it is white birch here\n      speciesTable[Species == \"AC\", newSpeciesName := \"balsam poplar\"]\n      # speciesTable[Species == \"X\", newSpeciesName := \"unknown\"]\n      speciesTable[Species == \"B\", newSpeciesName := \"fir\"]\n      speciesTable[Species == \"W\", newSpeciesName := \"willow\"]\n      speciesTable[Species == \"DR\", newSpeciesName := \"red alder\"]\n      speciesTable[Species == \"DM\", newSpeciesName := \"mountain alder\"]\n      speciesTable[Species == \"PJ\", newSpeciesName := \"jack pine\"]\n      speciesTable[Species == \"ZH\", newSpeciesName := \"hardwood\"]\n      speciesTable[Species == \"SXW\", newSpeciesName := \"white spruce\"]\n      # SXW is hybrid between engelmann and white spruce\n      speciesTable[Species == \"XH\", newSpeciesName := \"hardwood\"]\n      speciesTable[Species == \"SX\", newSpeciesName := \"white spruce\"]\n      # SX is hybrid\n      speciesTable[Species == \"A\", newSpeciesName := \"trembling aspen\"]\n      # A is aspen cottonwood and poplar, assume it is trembling aspen\n      speciesTable[Species == \"P\", newSpeciesName := \"lodgepole pine\"]\n      # P is pine Species, assume it is lodgepole pine\n      speciesTable[Species == \"MR\", newSpeciesName := \"red maple\"]\n      # MR could not find, assume it is red maple\n      speciesTable[Species == \"SE\", newSpeciesName := \"engelmann spruce\"]\n      speciesTable[Species == \"FD\", newSpeciesName := \"douglas-fir\"] \n      speciesTable[Species == \"BA\", newSpeciesName := \"amabalis fir\"] \n      speciesTable[Species == \"CW\", newSpeciesName := \"western redcedar\"]\n      speciesTable[Species == \"HW\", newSpeciesName := \"western hemlock\"]\n      speciesTable[Species == \"FDI\", newSpeciesName := \"douglas-fir\"]\n      # speciesTable[Species == \"SXE\", newSpeciesName := \"unknown\"]\n      speciesTable[Species == \"D\", newSpeciesName := \"red alder\"]\n      # D is alder, assume red alder\n      speciesTable[Species == \"H\", newSpeciesName := \"western hemlock\"]\n      speciesTable[Species == \"MV\", newSpeciesName := \"vine maple\"] \n      speciesTable[Species == \"HM\", newSpeciesName := \"mountain hemlock\"] \n      speciesTable[Species == \"EXP\", newSpeciesName := \"white birch\"]\n      speciesTable[Species == \"WS\", newSpeciesName := \"scoulers willow\"]\n      speciesTable[Species == \"AX\", newSpeciesName := \"trembling aspen\"]\n      # hybrid poplars for AX, assume trembling aspen\n    } else if(forestInventorySource == \"ABPSP\"){\n      # speciesTable[Species == \"  \", newSpeciesName := \"unknown\"]\n      speciesTable[Species == \"AW\", newSpeciesName := \"trembling aspen\"]\n      speciesTable[Species == \"BW\", newSpeciesName := \"white birch\"]\n      speciesTable[Species == \"FA\", newSpeciesName := \"alpine fir\"]\n      speciesTable[Species == \"FB\", newSpeciesName := \"balsam fir\"]\n      speciesTable[Species == \"FD\", newSpeciesName := \"douglas-fir\"]\n      speciesTable[Species == \"LA\", newSpeciesName := \"alpine larch\"]\n      speciesTable[Species == \"LT\", newSpeciesName := \"tamarack larch\"]\n      # speciesTable[Species == \"P \", newSpeciesName := \"unknown\"]\n      speciesTable[Species == \"PB\", newSpeciesName := \"balsam poplar\"]\n      speciesTable[Species == \"PF\", newSpeciesName := \"limber pine\"]\n      speciesTable[Species == \"PJ\", newSpeciesName := \"jack pine\"]\n      speciesTable[Species == \"PL\", newSpeciesName := \"lodgepole pine\"]\n      speciesTable[Species == \"PW\", newSpeciesName := \"whitebark pine\"]\n      speciesTable[Species == \"SB\", newSpeciesName := \"black spruce\"]\n      speciesTable[Species == \"SE\", newSpeciesName := \"engelmann spruce\"]\n      speciesTable[Species == \"SW\", newSpeciesName := \"white spruce\"]\n    } else if(forestInventorySource == \"SKPSP\" | forestInventorySource == \"SKTSP\"){\n      # speciesTable[Species == \"\", newSpeciesName := \"unknown\"]\n      speciesTable[Species == \"BF\", newSpeciesName := \"balsam fir\"]\n      speciesTable[Species == \"BP\", newSpeciesName := \"balsam poplar\"]\n      speciesTable[Species == \"BS\", newSpeciesName := \"black spruce\"]\n      # speciesTable[Species == \"DC\", newSpeciesName := \"unknown\"] # what is this\n      # speciesTable[Species == \"DD\", newSpeciesName := \"unknown\"] # what is this\n      # speciesTable[Species == \"DU\", newSpeciesName := \"unknown\"] # what is this\n      speciesTable[Species == \"GA\", newSpeciesName := \"green ash\"]\n      speciesTable[Species == \"JP\", newSpeciesName := \"jack pine\"]\n      speciesTable[Species == \"MM\", newSpeciesName := \"manitoba maple\"]\n      # speciesTable[Species == \"PC\", newSpeciesName := \"unknown\"] # what is this\n      speciesTable[Species == \"TA\", newSpeciesName := \"trembling aspen\"]\n      speciesTable[Species == \"TL\", newSpeciesName := \"tamarack larch\"]\n      # speciesTable[Species == \"UI\", newSpeciesName := \"unknown\"] # what is this\n      speciesTable[Species == \"WB\", newSpeciesName := \"white birch\"]\n      speciesTable[Species == \"WE\", newSpeciesName := \"white elm\"]\n      speciesTable[Species == \"WS\", newSpeciesName := \"white spruce\"]\n      # speciesTable[Species == \"XX\", newSpeciesName := \"unknown\"] # what is this\n    } else if(forestInventorySource == \"NWTTSP\"){\n      speciesTable[Species == \"A\", newSpeciesName := \"trembling aspen\"]\n      speciesTable[Species == \"BW\", newSpeciesName := \"white birch\"]\n      speciesTable[Species == \"Bw\", newSpeciesName := \"white birch\"]\n      speciesTable[Species == \"F\", newSpeciesName := \"balsam fir\"]\n      speciesTable[Species == \"FB\", newSpeciesName := \"balsam fir\"]\n      speciesTable[Species == \"L\", newSpeciesName := \"tamarack larch\"]\n      speciesTable[Species == \"LT\", newSpeciesName := \"tamarack larch\"]\n      speciesTable[Species == \"PB\", newSpeciesName := \"balsam poplar\"]\n      speciesTable[Species == \"Pj\", newSpeciesName := \"jack pine\"]\n      speciesTable[Species == \"PJ\", newSpeciesName := \"jack pine\"]\n      speciesTable[Species == \"Pl\", newSpeciesName := \"lodgepole pine\"]\n      speciesTable[Species == \"PL\", newSpeciesName := \"lodgepole pine\"]\n      speciesTable[Species == \"Po\", newSpeciesName := \"balsam poplar\"]\n      speciesTable[Species == \"PO\", newSpeciesName := \"balsam poplar\"]\n      speciesTable[Species == \"Sb\", newSpeciesName := \"black spruce\"]\n      speciesTable[Species == \"SB\", newSpeciesName := \"black spruce\"]\n      speciesTable[Species == \"sw\", newSpeciesName := \"white spruce\"]\n      speciesTable[Species == \"Sw\", newSpeciesName := \"white spruce\"]\n      speciesTable[Species == \"SW\", newSpeciesName := \"white spruce\"]\n      speciesTable[Species == \"W\", newSpeciesName := \"willow\"]\n    } else if(forestInventorySource == \"NFIPSP\"){\n      # the Species code system in NFI is different from provincial systems\n      # the speciesTable for NFIPSP must have Genus and Species column \n      \n      speciesTable[Genus == \"ABIE\" & Species == \"BAL\",\n                   newSpeciesName := \"balsam fir\"]\n      speciesTable[Genus == \"ABIE\" & Species == \"LAS\",\n                   newSpeciesName := \"subalpine fir\"]\n      speciesTable[Genus == \"ACER\" & Species == \"SPI\",\n                   newSpeciesName := \"mountain maple\"]\n      speciesTable[Genus == \"ALNU\" & Species == \"SPP\",\n                   newSpeciesName := \"alder\"]\n      speciesTable[Genus == \"ALNU\" & Species == \"INC\",\n                   newSpeciesName := \"gray alder\"]\n      speciesTable[Genus == \"ALNU\" & Species == \"RUB\",\n                   newSpeciesName := \"red alder\"]\n      speciesTable[Genus == \"ALNU\" & Species == \"CRI\",\n                   newSpeciesName := \"alder\"]\n      speciesTable[Genus == \"ALNU\" & Species == \"VIR\",\n                   newSpeciesName := \"sitka alder\"]\n      speciesTable[Genus == \"AMEL\" & Species == \"ALN\",\n                   newSpeciesName := \"saskatoon-berry\"]\n      speciesTable[Genus == \"BETU\" & Species == \"GLA\",\n                   newSpeciesName := \"birch\"]\n      \n      speciesTable[Genus == \"BETU\" & Species == \"NAN\",\n                   newSpeciesName := \"birch\"] # not found\n      speciesTable[Genus == \"BETU\" & Species == \"GLA\",\n                   newSpeciesName := \"birch\"] # not found\n      speciesTable[Genus == \"BETU\" & Species == \"NEO\",\n                   newSpeciesName := \"white birch\"] # alaska paper birch\n      speciesTable[Genus == \"BETU\" & Species == \"OCC\",\n                   newSpeciesName := \"white birch\"] # water birch\n      speciesTable[Genus == \"BETU\" & Species == \"PAP\",\n                   newSpeciesName := \"white birch\"] \n      speciesTable[Genus == \"BETU\" & Species == \"PUM\",\n                   newSpeciesName := \"birch\"] # not found\n      speciesTable[Genus == \"BETU\" & Species == \"SPP\",\n                   newSpeciesName := \"birch\"] # water birch\n      speciesTable[Genus == \"CORN\" & Species == \"STO\",\n                   newSpeciesName := \"redosier dogwood\"] # water birch\n      speciesTable[Genus == \"CORY\" & Species == \"COR\",\n                   newSpeciesName := \"unknown\"] # water birch\n      speciesTable[Genus == \"FRAX\" & Species == \"PEN\",\n                   newSpeciesName := \"red ash\"] \n      speciesTable[Genus == \"GENC\" & Species == \"SPP\",\n                   newSpeciesName := \"softwood\"] \n      speciesTable[Genus == \"GENH\" & Species == \"SPP\",\n                   newSpeciesName := \"hardwood\"] \n      speciesTable[Genus == \"LARI\" & Species == \"LAR\",\n                   newSpeciesName := \"tamarack larch\"] \n      speciesTable[Genus == \"LARI\" & Species == \"OCC\",\n                   newSpeciesName := \"western larch\"] \n      speciesTable[Genus == \"PICE\" & Species == \"ENG\",\n                   newSpeciesName := \"engelmann spruce\"] \n      speciesTable[Genus == \"PICE\" & Species == \"GLA\",\n                   newSpeciesName := \"white spruce\"] \n      speciesTable[Genus == \"PICE\" & Species == \"MAR\",\n                   newSpeciesName := \"black spruce\"] \n      speciesTable[Genus == \"PICE\" & Species == \"SPP\",\n                   newSpeciesName := \"spruce\"] \n      speciesTable[Genus == \"PINU\" & Species == \"BAN\",\n                   newSpeciesName := \"jack pine\"] \n      speciesTable[Genus == \"PINU\" & Species == \"CON\",\n                   newSpeciesName := \"lodgepole pine\"] \n      speciesTable[Genus == \"POPU\" & Species == \"BAL\",\n                   newSpeciesName := \"balsam poplar\"] \n      speciesTable[Genus == \"POPU\" & Species == \"SPP\",\n                   newSpeciesName := \"poplar\"] \n      speciesTable[Genus == \"POPU\" & Species == \"TRE\",\n                   newSpeciesName := \"trembling aspen\"]\n      speciesTable[Genus == \"PRUN\" & Species == \"PEN\",\n                   newSpeciesName := \"pin cherry\"]\n      speciesTable[Genus == \"PRUN\" & Species == \"VIR\",\n                   newSpeciesName := \"choke cherry\"]\n      speciesTable[Genus == \"QUER\" & Species == \"MAC\",\n                   newSpeciesName := \"bur oak\"]\n      speciesTable[Genus == \"SALI\" & Species == \"PED\",\n                   newSpeciesName := \"willow\"] # not found assume willow\n      speciesTable[Genus == \"SALI\" & Species == \"PLA\",\n                   newSpeciesName := \"willow\"] # not found assume willow\n      speciesTable[Genus == \"SALI\" & Species == \"SCO\",\n                   newSpeciesName := \"scouler willow\"]\n      speciesTable[Genus == \"SALI\" & Species == \"SPP\",\n                   newSpeciesName := \"willow\"]\n      speciesTable[Genus == \"SALI\" & Species == \"SPP\",\n                   newSpeciesName := \"willow\"]\n      speciesTable[Genus == \"SHEP\" & Species == \"CAN\",\n                   newSpeciesName := \"berry\"] # not found assume berry\n      speciesTable[Genus == \"UNKN\" & Species == \"SPP\",\n                   newSpeciesName := \"unknown\"] # \n    } else {\n      stop(\"Please define the correct forestInventorySource among \")\n    }\n    speciesTable[is.na(newSpeciesName), newSpeciesName := \"unknown\"]\n    return(speciesTable)\n  })\n\n\n\n\n\n\n\n",
    "created" : 1461740334610.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1399688873",
    "id" : "24E37463",
    "lastKnownWriteTime" : 1461741414,
    "path" : "~/GitHub/landwebNRV/landwebNRV/R/standardizeSpeciesName.R",
    "project_path" : "R/standardizeSpeciesName.R",
    "properties" : {
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "type" : "r_source"
}