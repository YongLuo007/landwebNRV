{
    "contents" : "################################################################################\n#' Standardize species name from different forest inventory data, this function to make all\n#' the species compatible to biomassCalculation function\n#' \n#' \n#' @param speciesTable  data table. It must at least have one column species\n#'\n#' \n#' @param forestInventorySource,  Character string. Give the forest inventory data source             \n#'        Currently support MBPSP, MBTSP, ABPSP, BCPSP, SKPSP, SKTSP and NFIPSP           \n#'        \n#'\n#' @return  a data tables, the first one contains successfully standardized species.\n#'          the newSpeciesName is the standardized name, unknown means the species in \n#'          the original species table can not be found according to manual\n#'                      \n#'\n#' @note no note\n#'\n#' @seealso no\n#'\n#' @include \n#' @export\n#' @docType methods\n#' @rdname standardizeSpeciesName\n#'\n#' @author Yong Luo\n#'\n#' @examples\n#' \\dontrun{\n#' \n#' }\nsetGeneric(\"standardizeSpeciesName\", function(speciesTable, forestInventorySource) {\n  standardGeneric(\"standardizeSpeciesName\")\n})\n#' @export\n#' @rdname standardizeSpeciesName\nsetMethod(\n  \"standardizeSpeciesName\",\n  signature = c(speciesTable = \"data.table\", \n                forestInventorySource = \"character\"),\n  definition = function(speciesTable, forestInventorySource) {\n    if(forestInventorySource == \"MBPSP\" | forestInventorySource == \"MBTSP\"){\n      speciesTable[species == \"WP\", newSpeciesName := \"white pine\"]\n      speciesTable[species == \"RP\", newSpeciesName := \"red pine\"]\n      speciesTable[species == \"JP\", newSpeciesName := \"jack pine\"]\n      speciesTable[species == \"SP\", newSpeciesName := \"scots pine\"]\n      speciesTable[species == \"BS\", newSpeciesName := \"black spruce\"]\n      speciesTable[species == \"WS\", newSpeciesName := \"white spruce\"]\n      speciesTable[species == \"BF\", newSpeciesName := \"balsam fir\"]\n      speciesTable[species == \"TL\", newSpeciesName := \"tamarack larch\"]\n      speciesTable[species == \"EC\", newSpeciesName := \"eastern redcedar\"]\n      # assume cedar in original document is eastern redcedar\n      speciesTable[species == \"TA\", newSpeciesName := \"trembling aspen\"]\n      speciesTable[species == \"LA\", newSpeciesName := \"largetooth aspen\"]\n      speciesTable[species == \"BA\", newSpeciesName := \"balsam poplar\"]\n      speciesTable[species == \"CO\", newSpeciesName := \"eastern cottonwood\"]\n      speciesTable[species == \"W\", newSpeciesName := \"willow\"]\n      speciesTable[species == \"WB\", newSpeciesName := \"white birch\"]\n      speciesTable[species == \"B\", newSpeciesName := \"basswood\"]\n      speciesTable[species == \"HB\", newSpeciesName := \"hackberry\"]\n      speciesTable[species == \"MM\", newSpeciesName := \"manitoba maple\"]\n      speciesTable[species == \"AS\", newSpeciesName := \"back ash\"]\n      # assume ash in original document is black ash\n      speciesTable[species == \"E\", newSpeciesName := \"white elm\"]\n      speciesTable[species == \"HH\", newSpeciesName := \"hop-hornbeam\"]\n      speciesTable[species == \"BO\", newSpeciesName := \"white oak\"]\n      # assume bur oak in original document is white oak\n    } else if (forestInventorySource == \"BCPSP\"){\n      speciesTable[species == \"SB\", newSpeciesName := \"black spruce\"]\n      speciesTable[species == \"LT\", newSpeciesName := \"tamarack larch\"]\n      speciesTable[species == \"SW\", newSpeciesName := \"white spruce\"]\n      speciesTable[species == \"EP\", newSpeciesName := \"white brich\"]\n      speciesTable[species == \"PLI\", newSpeciesName := \"lodgepole pine\"]\n      speciesTable[species == \"ACB\", newSpeciesName := \"balsam poplar\"]\n      speciesTable[species == \"S\", newSpeciesName := \"black spruce\"]\n      # S for spruce in original doc. assume S is black spruce\n      speciesTable[species == \"PL\", newSpeciesName := \"lodgepole pine\"]\n      speciesTable[species == \"ACT\", newSpeciesName := \"black cottonwood\"]\n      speciesTable[species == \"AT\", newSpeciesName := \"trembling aspen\"]\n      speciesTable[species == \"E\", newSpeciesName := \"white birch\"]\n      # E for birch in original doc. assume S is white birch\n      # speciesTable[species == \"XC\", newSpeciesName := \"unknow conifer\"]\n      speciesTable[species == \"BL\", newSpeciesName := \"alpine fir\"]\n      speciesTable[species == \"EA\", newSpeciesName := \"white birch\"]\n      # EA is alaka paper birch, assume it is white birch here\n      speciesTable[species == \"AC\", newSpeciesName := \"balsam poplar\"]\n      # speciesTable[species == \"X\", newSpeciesName := \"unknown\"]\n      speciesTable[species == \"B\", newSpeciesName := \"fir\"]\n      speciesTable[species == \"W\", newSpeciesName := \"willow\"]\n      speciesTable[species == \"DR\", newSpeciesName := \"red alder\"]\n      speciesTable[species == \"DM\", newSpeciesName := \"mountain alder\"]\n      speciesTable[species == \"PJ\", newSpeciesName := \"jack pine\"]\n      speciesTable[species == \"ZH\", newSpeciesName := \"hardwood\"]\n      speciesTable[species == \"SXW\", newSpeciesName := \"white spruce\"]\n      # SXW is hybrid between engelmann and white spruce\n      speciesTable[species == \"XH\", newSpeciesName := \"hardwood\"]\n      speciesTable[species == \"SX\", newSpeciesName := \"white spruce\"]\n      # SX is hybrid\n      speciesTable[species == \"A\", newSpeciesName := \"trembling aspen\"]\n      # A is aspen cottonwood and poplar, assume it is trembling aspen\n      speciesTable[species == \"P\", newSpeciesName := \"lodgepole pine\"]\n      # P is pine species, assume it is lodgepole pine\n      speciesTable[species == \"MR\", newSpeciesName := \"red maple\"]\n      # MR could not find, assume it is red maple\n      speciesTable[species == \"SE\", newSpeciesName := \"engelmann spruce\"]\n      speciesTable[species == \"FD\", newSpeciesName := \"douglas-fir\"] \n      speciesTable[species == \"BA\", newSpeciesName := \"amabalis fir\"] \n      speciesTable[species == \"CW\", newSpeciesName := \"western redcedar\"]\n      speciesTable[species == \"HW\", newSpeciesName := \"western hemlock\"]\n      speciesTable[species == \"FDI\", newSpeciesName := \"douglas-fir\"]\n      # speciesTable[species == \"SXE\", newSpeciesName := \"unknown\"]\n      speciesTable[species == \"D\", newSpeciesName := \"red alder\"]\n      # D is alder, assume red alder\n      speciesTable[species == \"H\", newSpeciesName := \"western hemlock\"]\n      speciesTable[species == \"MV\", newSpeciesName := \"vine maple\"] \n      speciesTable[species == \"HM\", newSpeciesName := \"mountain hemlock\"] \n      speciesTable[species == \"EXP\", newSpeciesName := \"white birch\"]\n      speciesTable[species == \"WS\", newSpeciesName := \"scoulers willow\"]\n      speciesTable[species == \"AX\", newSpeciesName := \"trembling aspen\"]\n      # hybrid poplars for AX, assume trembling aspen\n    } else if(forestInventorySource == \"ABPSP\"){\n      # speciesTable[species == \"  \", newSpeciesName := \"unknown\"]\n      speciesTable[species == \"AW\", newSpeciesName := \"trembling aspen\"]\n      speciesTable[species == \"BW\", newSpeciesName := \"white birch\"]\n      speciesTable[species == \"FA\", newSpeciesName := \"alpine fir\"]\n      speciesTable[species == \"FB\", newSpeciesName := \"balsam fir\"]\n      speciesTable[species == \"FD\", newSpeciesName := \"douglas-fir\"]\n      speciesTable[species == \"LA\", newSpeciesName := \"alpine larch\"]\n      speciesTable[species == \"LT\", newSpeciesName := \"tamarack larch\"]\n      # speciesTable[species == \"P \", newSpeciesName := \"unknown\"]\n      speciesTable[species == \"PB\", newSpeciesName := \"balsam poplar\"]\n      speciesTable[species == \"PF\", newSpeciesName := \"limber pine\"]\n      speciesTable[species == \"PJ\", newSpeciesName := \"jack pine\"]\n      speciesTable[species == \"PL\", newSpeciesName := \"lodgepole pine\"]\n      speciesTable[species == \"PW\", newSpeciesName := \"whitebark pine\"]\n      speciesTable[species == \"SB\", newSpeciesName := \"black spruce\"]\n      speciesTable[species == \"SE\", newSpeciesName := \"englemann spruce\"]\n      speciesTable[species == \"SW\", newSpeciesName := \"white spruce\"]\n    } else if(forestInventorySource == \"SKPSP\" | forestInventorySource == \"SKTSP\"){\n      # speciesTable[species == \"\", newSpeciesName := \"unknown\"]\n      speciesTable[species == \"BF\", newSpeciesName := \"balsam fir\"]\n      speciesTable[species == \"BP\", newSpeciesName := \"balsam poplar\"]\n      speciesTable[species == \"BS\", newSpeciesName := \"black spruce\"]\n      # speciesTable[species == \"DC\", newSpeciesName := \"unknown\"] # what is this\n      # speciesTable[species == \"DD\", newSpeciesName := \"unknown\"] # what is this\n      # speciesTable[species == \"DU\", newSpeciesName := \"unknown\"] # what is this\n      speciesTable[species == \"GA\", newSpeciesName := \"green ash\"]\n      speciesTable[species == \"JP\", newSpeciesName := \"jack pine\"]\n      speciesTable[species == \"MM\", newSpeciesName := \"manitoba maple\"]\n      # speciesTable[species == \"PC\", newSpeciesName := \"unknown\"] # what is this\n      speciesTable[species == \"TA\", newSpeciesName := \"trembling aspen\"]\n      speciesTable[species == \"TL\", newSpeciesName := \"tamarack larch\"]\n      # speciesTable[species == \"UI\", newSpeciesName := \"unknown\"] # what is this\n      speciesTable[species == \"WB\", newSpeciesName := \"white birch\"]\n      speciesTable[species == \"WE\", newSpeciesName := \"white elm\"]\n      speciesTable[species == \"WS\", newSpeciesName := \"white spruce\"]\n      # speciesTable[species == \"XX\", newSpeciesName := \"unknown\"] # what is this\n    } else if(forestInventorySource == \"NWTTSP\"){\n      speciesTable[species == \"A\", newSpeciesName := \"trembling aspen\"]\n      speciesTable[species == \"BW\", newSpeciesName := \"white birch\"]\n      speciesTable[species == \"Bw\", newSpeciesName := \"white birch\"]\n      speciesTable[species == \"F\", newSpeciesName := \"balsam fir\"]\n      speciesTable[species == \"FB\", newSpeciesName := \"balsam fir\"]\n      speciesTable[species == \"L\", newSpeciesName := \"tamarack larch\"]\n      speciesTable[species == \"LT\", newSpeciesName := \"tamarack larch\"]\n      speciesTable[species == \"PB\", newSpeciesName := \"balsam poplar\"]\n      speciesTable[species == \"Pj\", newSpeciesName := \"jack pine\"]\n      speciesTable[species == \"PJ\", newSpeciesName := \"jack pine\"]\n      speciesTable[species == \"Pl\", newSpeciesName := \"lodgepole pine\"]\n      speciesTable[species == \"PL\", newSpeciesName := \"lodgepole pine\"]\n      speciesTable[species == \"Po\", newSpeciesName := \"balsam poplar\"]\n      speciesTable[species == \"PO\", newSpeciesName := \"balsam poplar\"]\n      speciesTable[species == \"Sb\", newSpeciesName := \"black spruce\"]\n      speciesTable[species == \"SB\", newSpeciesName := \"black spruce\"]\n      speciesTable[species == \"sw\", newSpeciesName := \"white spruce\"]\n      speciesTable[species == \"Sw\", newSpeciesName := \"white spruce\"]\n      speciesTable[species == \"SW\", newSpeciesName := \"white spruce\"]\n      speciesTable[species == \"W\", newSpeciesName := \"willow\"]\n    } else if(forestInventorySource == \"NFIPSP\"){\n      # the species code system in NFI is different from provincial systems\n      # the speciesTable for NFIPSP must have genus and species column \n      \n      speciesTable[genus == \"ABIE\", species == \"BAL\",\n                   newSpeciesName := \"balsam fir\"]\n      speciesTable[genus == \"ABIE\", species == \"LAS\",\n                   newSpeciesName := \"subalpine fir\"]\n      speciesTable[genus == \"ACER\", species == \"SPI\",\n                   newSpeciesName := \"mountain maple\"]\n      speciesTable[genus == \"ALNU\", species == \"SPP\",\n                   newSpeciesName := \"alder\"]\n      speciesTable[genus == \"ALNU\", species == \"INC\",\n                   newSpeciesName := \"gray alder\"]\n      speciesTable[genus == \"ALNU\", species == \"RUB\",\n                   newSpeciesName := \"red alder\"]\n      speciesTable[genus == \"ALNU\", species == \"CRI\",\n                   newSpeciesName := \"alder\"]\n      speciesTable[genus == \"ALNU\", species == \"VIR\",\n                   newSpeciesName := \"sitka alder\"]\n      speciesTable[genus == \"AMEL\", species == \"ALN\",\n                   newSpeciesName := \"saskatoon-berry\"]\n      speciesTable[genus == \"BETU\", species == \"GLA\",\n                   newSpeciesName := \"birch\"]\n      \n      speciesTable[genus == \"BETU\", species == \"NAN\",\n                   newSpeciesName := \"birch\"] # not found\n      speciesTable[genus == \"BETU\", species == \"GLA\",\n                   newSpeciesName := \"birch\"] # not found\n      speciesTable[genus == \"BETU\", species == \"NEO\",\n                   newSpeciesName := \"white birch\"] # alaska paper birch\n      speciesTable[genus == \"BETU\", species == \"OCC\",\n                   newSpeciesName := \"white birch\"] # water birch\n      speciesTable[genus == \"BETU\", species == \"PAP\",\n                   newSpeciesName := \"white birch\"] \n      speciesTable[genus == \"BETU\", species == \"PUM\",\n                   newSpeciesName := \"birch\"] # not found\n      speciesTable[genus == \"BETU\", species == \"SPP\",\n                   newSpeciesName := \"birch\"] # water birch\n      speciesTable[genus == \"CORN\", species == \"STO\",\n                   newSpeciesName := \"redosier dogwood\"] # water birch\n      speciesTable[genus == \"CORY\", species == \"COR\",\n                   newSpeciesName := \"unknown\"] # water birch\n      speciesTable[genus == \"FRAX\", species == \"PEN\",\n                   newSpeciesName := \"red ash\"] \n      speciesTable[genus == \"GENC\", species == \"SPP\",\n                   newSpeciesName := \"softwood\"] \n      speciesTable[genus == \"GENH\", species == \"SPP\",\n                   newSpeciesName := \"hardwood\"] \n      speciesTable[genus == \"LARI\", species == \"LAR\",\n                   newSpeciesName := \"tamarack larch\"] \n      speciesTable[genus == \"LARI\", species == \"OCC\",\n                   newSpeciesName := \"western larch\"] \n      speciesTable[genus == \"PICE\", species == \"ENG\",\n                   newSpeciesName := \"engelmann spruce\"] \n      speciesTable[genus == \"PICE\", species == \"GLA\",\n                   newSpeciesName := \"white spruce\"] \n      speciesTable[genus == \"PICE\", species == \"MAR\",\n                   newSpeciesName := \"black spruce\"] \n      speciesTable[genus == \"PICE\", species == \"SPP\",\n                   newSpeciesName := \"spruce\"] \n      speciesTable[genus == \"PINU\", species == \"BAN\",\n                   newSpeciesName := \"jack pine\"] \n      speciesTable[genus == \"PINU\", species == \"CON\",\n                   newSpeciesName := \"lodgepole pine\"] \n      speciesTable[genus == \"POPU\", species == \"BAL\",\n                   newSpeciesName := \"balsam poplar\"] \n      speciesTable[genus == \"POPU\", species == \"SPP\",\n                   newSpeciesName := \"poplar\"] \n      speciesTable[genus == \"POPU\", species == \"TRE\",\n                   newSpeciesName := \"trembling aspen\"]\n      speciesTable[genus == \"PRUN\", species == \"PEN\",\n                   newSpeciesName := \"pin cherry\"]\n      speciesTable[genus == \"PRUN\", species == \"VIR\",\n                   newSpeciesName := \"choke cherry\"]\n      speciesTable[genus == \"QUER\", species == \"MAC\",\n                   newSpeciesName := \"bur oak\"]\n      speciesTable[genus == \"SALI\", species == \"PED\",\n                   newSpeciesName := \"willow\"] # not found assume willow\n      speciesTable[genus == \"SALI\", species == \"PLA\",\n                   newSpeciesName := \"willow\"] # not found assume willow\n      speciesTable[genus == \"SALI\", species == \"SCO\",\n                   newSpeciesName := \"scouler willow\"]\n      speciesTable[genus == \"SALI\", species == \"SPP\",\n                   newSpeciesName := \"willow\"]\n      speciesTable[genus == \"SALI\", species == \"SPP\",\n                   newSpeciesName := \"willow\"]\n      speciesTable[genus == \"SHEP\", species == \"CAN\",\n                   newSpeciesName := \"berry\"] # not found assume berry\n      speciesTable[genus == \"UNKN\", species == \"SPP\",\n                   newSpeciesName := \"unknown\"] # \n    } else {\n      stop(\"Please define the correct forestInventorySource among \")\n    }\n    speciesTable[is.na(newSpeciesName), newSpeciesName := \"unknown\"]\n    return(speciesTable)\n  })\n\n\n\n\n\n\n\n",
    "created" : 1460662144061.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2678543321",
    "id" : "3129F159",
    "lastKnownWriteTime" : 1460747124,
    "path" : "~/GitHub/landwebNRV/landwebNRV/R/standardizeSpeciesName.R",
    "project_path" : "R/standardizeSpeciesName.R",
    "properties" : {
        "tempName" : "Untitled2"
    },
    "source_on_save" : false,
    "type" : "r_source"
}